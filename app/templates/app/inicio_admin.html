{% extends 'app/base.html' %}

{% load static %}

{% block contenido %}
<link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>

<!-- offcanvas -->
<main class="mt-5 pt-3">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12" style="padding-bottom: 30px; padding-top: 30px; text-align: center; ">
        <h2>Bievenido a teryx {{ user.username }} </h2>
      </div>
    </div>
    <div class="row">
      <div class="col-md-3 mb-3">
        <div class="card text-white " style="border-radius: 20px; background: #216869">
          <div class="card-body py-5" style="align-content: center; text-align: center;">
            <p style="font-size: 20px;">Total de Clientes</p>
            <p class="bi bi-people-fill d-flex align-items-center justify-content-center" style="font-size: 40px; ">{{ total_clientes }}</p>
          </div>
          <a class="card-footer d-flex justify-content-center " href="{% url 'listar_cliente'%}"
             style="color: rgb(255, 255, 255);  text-decoration: none; border-radius: 15px; border-color: transparent; ">Listado de Clientes</a>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="card text-white" style="border-radius: 20px; background: #629460">
          <div class="card-body py-5" style="align-content: center; text-align: center;">
            <p style="font-size: 20px;">Total de Proveedores</p>
            <p class="bi bi-person-bounding-box d-flex align-items-center justify-content-center" style="font-size: 40px; ">{{ total_proveedores }}</p>
          </div>
          <a class="card-footer d-flex justify-content-center" href="{% url 'listar_proveedor'%}"
             style="color: rgb(255, 255, 255);  text-decoration: none; border-radius: 15px; border-color: transparent; ">Listado de Proveedores</a>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="card  text-white " style="border-radius: 20px; background: #9D5C63">
          <div class="card-body py-5" style="align-content: center; text-align: center;">
            <p style="font-size: 20px;">Total de Productos</p>
            <p class="bi bi-basket2 d-flex align-items-center justify-content-center" style="font-size: 40px; ">{{ total_productos }}</p>
          </div>
          <a class="card-footer d-flex justify-content-center" href="{% url 'listar_producto'%}"
             style="color: rgb(255, 255, 255);  text-decoration: none; border-radius: 15px; border-color: transparent; ">Listado de Productos</a>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="card  text-white " style="border-radius: 20px;background:#ba542b">
          <div class="card-body py-5" style="align-content: center; text-align: center;">
            <p style="font-size: 20px;">Total de Agendamiento</p>
            <p class="bi bi-list-task d-flex align-items-center justify-content-center" style="font-size: 40px;">{{ total_talleres }}</p>
          </div>
          <a class="card-footer d-flex justify-content-center" href="{% url 'list_taller'%}" 
             style="color: rgb(255, 255, 255);  text-decoration: none; border-radius: 15px; border-color: transparent; ">Listado de Agendamientos</a>
        </div>
      </div>
    </div>
    <hr>
    <div class="row">
      <div class="col-md-6 " >
    <div class="card" >
      <div class="card-body">
        <h3 class="card-title">Productos con Stock menor a 5 unidades </h3>
            <table class="table table-striped table-hover ">
              <tr style="background-color:#1b1b1b ;color: rgb(235, 232, 232);">
                <th>Nombre del Producto</th>
                <th>Stock</th>
              </tr>
            </thead>
            <tbody style="border-radius: 20px;">
              {% for producto in productos_menos_cinco %}
                <tr >
                  <td>{{ producto.nombre_producto }}</td>
                  <div style="text-align: center;">
                    <td   style="color: {% if producto.stock < 5 %}red{% else %}black{% endif %} ; ">{{ producto.stock }}</td>
                  </div>
                  
                </tr>
              {% endfor %}
            </tbody>
            </table>
    
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12 " >
        <div class="card" >
          <div class="card-body">
            <h3 class="card-title">Agendamientos en Estado <span style="color: red;">ATRASADOS</span></h3>
            
              <div class="table-responsive">
            <table id="example" class="table table-striped-columns table-hover data-table" style="width: 100% ; font-size: 12px;">
              <thead>
                <tr style="background-color:#1b1b1b ;color: rgb(235, 232, 232);">
                  <th>Nº</th>
                  <th>Datos del Cliente</th>
                  <th>Modelo de Bicicleta</th>
                  <th>Fecha de Inicio</th>
                  <th>Fecha de Término</th>
                  <!-- Agrega más columnas según sea necesario -->
                </tr>
              </thead>
              <tbody>
                {% for taller in talleres_atrasados_estado %}
                  <tr>
                    <td>{{ taller.id_taller }}</td>
                    <td>{{ taller.cliente_rut_cliente.rut_cliente }} - {{ taller.cliente_rut_cliente.nombre_cliente }} {{ taller.cliente_rut_cliente.apePaterno }} {{ taller.cliente_rut_cliente.apeMaterno }}</td>
                    <td>{{ taller.modelo_bicicleta }}</td>
                    <td>{{ taller.fecha_ingreso }}</td>
                    <td> <span style="color: red;">{{ taller.fecha_termino }}</span></td>
                    <!-- Agrega más celdas según sea necesario -->
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
      </div>
    </div>
    </div>

 
    <hr>
    

  </div>
</main>


{% endblock %}


